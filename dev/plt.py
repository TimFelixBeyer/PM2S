import matplotlib.pyplot as plt
inputstring = """Evaluating 0
Time signature num: 0/2201 denom: 0/2201 both: 0/2201
P/R/F1:  (0.9701986754966887, 0.9766666666666667, 0.9734219269102989)
raw {'Multi-pitch': 1.0, 'Voice': 0.9178913219789132, 'Meter': 0.959499263622975, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7754781171203777}
Evaluating 1
Time signature num: 0/2668 denom: 0/2668 both: 0/2668
P/R/F1:  (0.8661087866108786, 0.9583333333333334, 0.9098901098901099)
raw {'Multi-pitch': 1.0, 'Voice': 0.9702099504256286, 'Meter': 0.8001944579484688, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7540808816748195}
Evaluating 2
Time signature num: 0/1371 denom: 1371/1371 both: 0/1371
P/R/F1:  (0.9857954545454546, 0.9155672823218998, 0.9493844049247606)
raw {'Multi-pitch': 1.0, 'Voice': 0.8966613247863248, 'Meter': 0.8880627839735646, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.9569448217519779}
Evaluating 3
Time signature num: 88/3316 denom: 2462/3316 both: 88/3316
P/R/F1:  (0.9256900212314225, 0.8449612403100775, 0.8834853090172239)
raw {'Multi-pitch': 1.0, 'Voice': 0.9308585694127863, 'Meter': 0.7388535031847133, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7339424145194999}
Evaluating 4
Time signature num: 0/829 denom: 0/829 both: 0/829
P/R/F1:  (0.9310344827586207, 0.9101123595505618, 0.9204545454545454)
raw {'Multi-pitch': 1.0, 'Voice': 0.7751198257080608, 'Meter': 0.8177215189873418, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7185682689390804}
Evaluating 5
Time signature num: 0/1237 denom: 1237/1237 both: 0/1237
P/R/F1:  (1.0, 0.9634703196347032, 0.9813953488372094)
raw {'Multi-pitch': 1.0, 'Voice': 0.9903365906623236, 'Meter': 0.8895066018068103, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7759686384938268}
Evaluating 6
Time signature num: 0/1490 denom: 0/1490 both: 0/1490
P/R/F1:  (0.9174311926605505, 0.9049773755656109, 0.9111617312072893)
raw {'Multi-pitch': 1.0, 'Voice': 0.7665718349928875, 'Meter': 0.7766788131181677, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.708650129622211}
Evaluating 7
Time signature num: 2308/2308 denom: 2308/2308 both: 2308/2308
P/R/F1:  (0.9935483870967742, 0.9903536977491961, 0.9919484702093397)
raw {'Multi-pitch': 1.0, 'Voice': 0.8485195215526969, 'Meter': 0.9323017408123792, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.9561642524730154}
Evaluating 8
Time signature num: 937/937 denom: 937/937 both: 937/937
P/R/F1:  (0.979381443298969, 0.979381443298969, 0.979381443298969)
raw {'Multi-pitch': 1.0, 'Voice': 0.9934782608695653, 'Meter': 0.9089469517022961, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7804850425143723}
Evaluating 9
Time signature num: 3104/3123 denom: 0/3123 both: 0/3123
P/R/F1:  (0.7810810810810811, 0.7789757412398922, 0.7800269905533063)
raw {'Multi-pitch': 1.0, 'Voice': 0.7669199652187065, 'Meter': 0.4450891007045171, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.8424018131846447}
Evaluating 10
Time signature num: 0/4457 denom: 4457/4457 both: 0/4457
P/R/F1:  (0.5287356321839081, 0.6943396226415094, 0.600326264274062)
raw {'Multi-pitch': 1.0, 'Voice': 0.831515733845784, 'Meter': 0.4881007932804479, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.6639233054252464}
Evaluating 11
Time signature num: 316/8556 denom: 8556/8556 both: 316/8556
P/R/F1:  (0.8378594249201278, 0.8577269010629599, 0.8476767676767676)
raw {'Multi-pitch': 1.0, 'Voice': 0.9192633649204368, 'Meter': 0.2351130578903753, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.6308752845621625}
Evaluating 12
Time signature num: 2652/2970 denom: 2970/2970 both: 2652/2970
P/R/F1:  (0.9983416252072969, 0.9950413223140496, 0.9966887417218543)
raw {'Multi-pitch': 1.0, 'Voice': 0.9653938768489851, 'Meter': 0.9572083545593478, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7845204462816666}
Evaluating 13
Time signature num: 2675/2684 denom: 2684/2684 both: 2675/2684
P/R/F1:  (0.9717741935483871, 0.9665775401069518, 0.9691689008042895)
raw {'Multi-pitch': 1.0, 'Voice': 0.9309935897435898, 'Meter': 0.9433051869722556, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7748597553431691}
Evaluating 14
Time signature num: 0/2815 denom: 2815/2815 both: 0/2815
P/R/F1:  (0.9910313901345291, 0.9844097995545658, 0.9877094972067039)
raw {'Multi-pitch': 1.0, 'Voice': 0.9515811492555679, 'Meter': 0.9846743295019158, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7872510957514967}
Evaluating 15
Time signature num: 0/1384 denom: 1384/1384 both: 0/1384
P/R/F1:  (0.9684542586750788, 0.9504643962848297, 0.959375)
raw {'Multi-pitch': 1.0, 'Voice': 0.8940669620876416, 'Meter': 0.9300095877277086, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7648153099630701}
Evaluating 16
Time signature num: 1218/2871 denom: 2871/2871 both: 1218/2871
P/R/F1:  (0.9898373983739838, 0.9938775510204082, 0.9918533604887984)
raw {'Multi-pitch': 1.0, 'Voice': 0.9598300073909831, 'Meter': 0.9621026894865525, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7843865393755072}
Evaluating 17
Time signature num: 3187/3187 denom: 3187/3187 both: 3187/3187
P/R/F1:  (0.9421841541755889, 0.9702315325248071, 0.9560021727322109)
raw {'Multi-pitch': 1.0, 'Voice': 0.9785668173014848, 'Meter': 0.8941137235284308, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7745361081659831}
Evaluating 18
Time signature num: 0/961 denom: 961/961 both: 0/961
P/R/F1:  (0.9817073170731707, 0.9817073170731707, 0.9817073170731707)
raw {'Multi-pitch': 1.0, 'Voice': 0.9563405797101449, 'Meter': 0.9372822299651568, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.9787245619350603}
Evaluating 19
Time signature num: 2666/4110 denom: 4110/4110 both: 2666/4110
P/R/F1:  (0.964451313755796, 0.9944223107569721, 0.9792075323656335)
raw {'Multi-pitch': 1.0, 'Voice': 0.9739109032734432, 'Meter': 0.9012592679769331, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7750340342500752}
Evaluating 20
Time signature num: 5951/5951 denom: 0/5951 both: 0/5951
P/R/F1:  (0.9572098475967175, 0.9477655252466628, 0.952464275298921)
raw {'Multi-pitch': 1.0, 'Voice': 0.9010465101343542, 'Meter': 0.8681476173414547, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7538388254951618}
Evaluating 21
Time signature num: 0/3393 denom: 3393/3393 both: 0/3393
P/R/F1:  (0.942080378250591, 0.9876084262701363, 0.9643073200241984)
raw {'Multi-pitch': 1.0, 'Voice': 0.8789618320610687, 'Meter': 0.891430646332607, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.9540784956787352}
Evaluating 22
Time signature num: 628/4972 denom: 4972/4972 both: 628/4972
P/R/F1:  (0.9877600979192166, 0.9817518248175182, 0.9847467968273337)
raw {'Multi-pitch': 1.0, 'Voice': 0.919517543859649, 'Meter': 0.9302151543498598, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.9699465396419018}
Evaluating 23
Time signature num: 0/748 denom: 748/748 both: 0/748
P/R/F1:  (1.0, 0.927536231884058, 0.9624060150375939)
raw {'Multi-pitch': 1.0, 'Voice': 0.9367446393762183, 'Meter': 0.9484978540772532, 'Value': 1.0, 'Harmony': 0.5, 'MV2H': 0.8770484986906943}
Evaluating 24
Time signature num: 0/414 denom: 414/414 both: 0/414
P/R/F1:  (1.0, 0.9692307692307692, 0.9843749999999999)
raw {'Multi-pitch': 1.0, 'Voice': 0.7664041994750658, 'Meter': 0.9758241758241759, 'Value': 1.0, 'Harmony': 0.5, 'MV2H': 0.8484456750598482}
Evaluating 25
Time signature num: 0/1957 denom: 1957/1957 both: 0/1957
P/R/F1:  (0.969047619047619, 0.9644549763033176, 0.9667458432304038)
raw {'Multi-pitch': 1.0, 'Voice': 0.8321071991592226, 'Meter': 0.8239649949511949, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7312144388220835}
Evaluating 26
Time signature num: 669/669 denom: 669/669 both: 669/669
P/R/F1:  (0.6412213740458015, 0.75, 0.691358024691358)
raw {'Multi-pitch': 1.0, 'Voice': 0.932683615819209, 'Meter': 0.5882352941176471, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7041837819873712}
Evaluating 27
Time signature num: 0/597 denom: 597/597 both: 0/597
P/R/F1:  (0.9574468085106383, 0.9473684210526315, 0.9523809523809523)
raw {'Multi-pitch': 1.0, 'Voice': 0.9773989898989899, 'Meter': 0.8120300751879699, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.757885813017392}
Evaluating 28
Time signature num: 0/1003 denom: 477/1003 both: 0/1003
P/R/F1:  (1.0, 0.9727272727272728, 0.9861751152073733)
raw {'Multi-pitch': 1.0, 'Voice': 0.9691231661548958, 'Meter': 0.9490150637311704, 'Value': 1.0, 'Harmony': 0.5, 'MV2H': 0.8836276459772133}
"""
inputstring = """Evaluating 0
Time signature num: 0/2201 denom: 0/2201 both: 0/2201
P/R/F1:  (0.9701986754966887, 0.9766666666666667, 0.9734219269102989)
raw {'Multi-pitch': 1.0, 'Voice': 0.9178913219789132, 'Meter': 0.959499263622975, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7754781171203777}
Evaluating 1
Time signature num: 0/2668 denom: 0/2668 both: 0/2668
P/R/F1:  (0.8661087866108786, 0.9583333333333334, 0.9098901098901099)
raw {'Multi-pitch': 1.0, 'Voice': 0.9702099504256286, 'Meter': 0.8001944579484688, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7540808816748195}
Evaluating 2
Time signature num: 0/1371 denom: 1371/1371 both: 0/1371
P/R/F1:  (0.9857954545454546, 0.9155672823218998, 0.9493844049247606)
raw {'Multi-pitch': 1.0, 'Voice': 0.8966613247863248, 'Meter': 0.8880627839735646, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.9569448217519779}
Evaluating 3
Time signature num: 88/3316 denom: 2462/3316 both: 88/3316
P/R/F1:  (0.9256900212314225, 0.8449612403100775, 0.8834853090172239)
raw {'Multi-pitch': 1.0, 'Voice': 0.9308585694127863, 'Meter': 0.7388535031847133, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7339424145194999}
Evaluating 4
Time signature num: 0/829 denom: 0/829 both: 0/829
P/R/F1:  (0.9310344827586207, 0.9101123595505618, 0.9204545454545454)
raw {'Multi-pitch': 1.0, 'Voice': 0.7751198257080608, 'Meter': 0.8177215189873418, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7185682689390804}
Evaluating 5
Time signature num: 0/1237 denom: 1237/1237 both: 0/1237
P/R/F1:  (1.0, 0.9634703196347032, 0.9813953488372094)
raw {'Multi-pitch': 1.0, 'Voice': 0.9903365906623236, 'Meter': 0.8895066018068103, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7759686384938268}
Evaluating 6
Time signature num: 0/1490 denom: 0/1490 both: 0/1490
P/R/F1:  (0.9174311926605505, 0.9049773755656109, 0.9111617312072893)
raw {'Multi-pitch': 1.0, 'Voice': 0.7665718349928875, 'Meter': 0.7766788131181677, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.708650129622211}
Evaluating 7
Time signature num: 0/2308 denom: 2308/2308 both: 0/2308
P/R/F1:  (0.9935483870967742, 0.9903536977491961, 0.9919484702093397)
raw {'Multi-pitch': 1.0, 'Voice': 0.8485195215526969, 'Meter': 0.9323017408123792, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.9561642524730154}
Evaluating 8
Time signature num: 937/937 denom: 937/937 both: 937/937
P/R/F1:  (0.979381443298969, 0.979381443298969, 0.979381443298969)
raw {'Multi-pitch': 1.0, 'Voice': 0.9934782608695653, 'Meter': 0.9089469517022961, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7804850425143723}
Evaluating 9
Time signature num: 3104/3123 denom: 0/3123 both: 0/3123
P/R/F1:  (0.7810810810810811, 0.7789757412398922, 0.7800269905533063)
raw {'Multi-pitch': 1.0, 'Voice': 0.7669199652187065, 'Meter': 0.4450891007045171, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.8424018131846447}
Evaluating 10
Time signature num: 0/4457 denom: 4457/4457 both: 0/4457
P/R/F1:  (0.5287356321839081, 0.6943396226415094, 0.600326264274062)
raw {'Multi-pitch': 1.0, 'Voice': 0.831515733845784, 'Meter': 0.4881007932804479, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.6639233054252464}
Evaluating 11
Time signature num: 8556/8556 denom: 8556/8556 both: 8556/8556
P/R/F1:  (0.8378594249201278, 0.8577269010629599, 0.8476767676767676)
raw {'Multi-pitch': 1.0, 'Voice': 0.9192633649204368, 'Meter': 0.2351130578903753, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.6308752845621625}
Evaluating 12
Time signature num: 2970/2970 denom: 2970/2970 both: 2970/2970
P/R/F1:  (0.9983416252072969, 0.9950413223140496, 0.9966887417218543)
raw {'Multi-pitch': 1.0, 'Voice': 0.9653938768489851, 'Meter': 0.9572083545593478, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7845204462816666}
Evaluating 13
Time signature num: 0/2684 denom: 2684/2684 both: 0/2684
P/R/F1:  (0.9717741935483871, 0.9665775401069518, 0.9691689008042895)
raw {'Multi-pitch': 1.0, 'Voice': 0.9309935897435898, 'Meter': 0.9433051869722556, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7748597553431691}
Evaluating 14
Time signature num: 0/2815 denom: 2815/2815 both: 0/2815
P/R/F1:  (0.9910313901345291, 0.9844097995545658, 0.9877094972067039)
raw {'Multi-pitch': 1.0, 'Voice': 0.9515811492555679, 'Meter': 0.9846743295019158, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7872510957514967}
Evaluating 15
Time signature num: 1384/1384 denom: 1384/1384 both: 1384/1384
P/R/F1:  (0.9684542586750788, 0.9504643962848297, 0.959375)
raw {'Multi-pitch': 1.0, 'Voice': 0.8940669620876416, 'Meter': 0.9300095877277086, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7648153099630701}
Evaluating 16
Time signature num: 0/2871 denom: 2871/2871 both: 0/2871
P/R/F1:  (0.9898373983739838, 0.9938775510204082, 0.9918533604887984)
raw {'Multi-pitch': 1.0, 'Voice': 0.9598300073909831, 'Meter': 0.9621026894865525, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7843865393755072}
Evaluating 17
Time signature num: 3187/3187 denom: 3187/3187 both: 3187/3187
P/R/F1:  (0.9421841541755889, 0.9702315325248071, 0.9560021727322109)
raw {'Multi-pitch': 1.0, 'Voice': 0.9785668173014848, 'Meter': 0.8941137235284308, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7745361081659831}
Evaluating 18
Time signature num: 0/961 denom: 961/961 both: 0/961
P/R/F1:  (0.9817073170731707, 0.9817073170731707, 0.9817073170731707)
raw {'Multi-pitch': 1.0, 'Voice': 0.9563405797101449, 'Meter': 0.9372822299651568, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.9787245619350603}
Evaluating 19
Time signature num: 0/4110 denom: 4110/4110 both: 0/4110
P/R/F1:  (0.964451313755796, 0.9944223107569721, 0.9792075323656335)
raw {'Multi-pitch': 1.0, 'Voice': 0.9739109032734432, 'Meter': 0.9012592679769331, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7750340342500752}
Evaluating 20
Time signature num: 5951/5951 denom: 0/5951 both: 0/5951
P/R/F1:  (0.9572098475967175, 0.9477655252466628, 0.952464275298921)
raw {'Multi-pitch': 1.0, 'Voice': 0.9010465101343542, 'Meter': 0.8681476173414547, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7538388254951618}
Evaluating 21
Time signature num: 0/3393 denom: 3393/3393 both: 0/3393
P/R/F1:  (0.942080378250591, 0.9876084262701363, 0.9643073200241984)
raw {'Multi-pitch': 1.0, 'Voice': 0.8789618320610687, 'Meter': 0.891430646332607, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.9540784956787352}
Evaluating 22
Time signature num: 4972/4972 denom: 4972/4972 both: 4972/4972
P/R/F1:  (0.9877600979192166, 0.9817518248175182, 0.9847467968273337)
raw {'Multi-pitch': 1.0, 'Voice': 0.919517543859649, 'Meter': 0.9302151543498598, 'Value': 1.0, 'Harmony': 1.0, 'MV2H': 0.9699465396419018}
Evaluating 23
Time signature num: 0/748 denom: 748/748 both: 0/748
P/R/F1:  (1.0, 0.927536231884058, 0.9624060150375939)
raw {'Multi-pitch': 1.0, 'Voice': 0.9367446393762183, 'Meter': 0.9484978540772532, 'Value': 1.0, 'Harmony': 0.5, 'MV2H': 0.8770484986906943}
Evaluating 24
Time signature num: 0/414 denom: 414/414 both: 0/414
P/R/F1:  (1.0, 0.9692307692307692, 0.9843749999999999)
raw {'Multi-pitch': 1.0, 'Voice': 0.7664041994750658, 'Meter': 0.9758241758241759, 'Value': 1.0, 'Harmony': 0.5, 'MV2H': 0.8484456750598482}
Evaluating 25
Time signature num: 0/1957 denom: 1957/1957 both: 0/1957
P/R/F1:  (0.969047619047619, 0.9644549763033176, 0.9667458432304038)
raw {'Multi-pitch': 1.0, 'Voice': 0.8321071991592226, 'Meter': 0.8239649949511949, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7312144388220835}
Evaluating 26
Time signature num: 669/669 denom: 669/669 both: 669/669
P/R/F1:  (0.6412213740458015, 0.75, 0.691358024691358)
raw {'Multi-pitch': 1.0, 'Voice': 0.932683615819209, 'Meter': 0.5882352941176471, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.7041837819873712}
Evaluating 27
Time signature num: 0/597 denom: 597/597 both: 0/597
P/R/F1:  (0.9574468085106383, 0.9473684210526315, 0.9523809523809523)
raw {'Multi-pitch': 1.0, 'Voice': 0.9773989898989899, 'Meter': 0.8120300751879699, 'Value': 1.0, 'Harmony': 0.0, 'MV2H': 0.757885813017392}
Evaluating 28
Time signature num: 0/1003 denom: 477/1003 both: 0/1003
P/R/F1:  (1.0, 0.9727272727272728, 0.9861751152073733)
raw {'Multi-pitch': 1.0, 'Voice': 0.9691231661548958, 'Meter': 0.9490150637311704, 'Value': 1.0, 'Harmony': 0.5, 'MV2H': 0.8836276459772133}
"""

time_rows = inputstring.splitlines()[1::4]
beat_rows = inputstring.splitlines()[2::4]
mv2h_rows = inputstring.splitlines()[3::4]
time_acc = {"both": [], "num": [], "denom": []}
count = 0
for row in time_rows:
    time_acc["both"].append(float(row.split("both: ")[-1].split("/")[0]))
    time_acc["num"].append(float(row.split("num: ")[-1].split("/")[0]))
    time_acc["denom"].append(float(row.split("denom: ")[-1].split("/")[0]))
    count += float(row.split("both: ")[-1].split("/")[1])
print({k: sum(v)/count for k, v in time_acc.items()}, count)
beat_f1 = []
for row in beat_rows:
    beat_f1.append(float(row.split(", ")[-1][:-1]))
mv2h_f1 = []
for row in mv2h_rows:
    mv2h_f1.append(float(row.split("Meter': ")[-1].split(",")[0]))

plt.scatter(beat_f1, mv2h_f1)
plt.savefig("plt.png")


# gt time sig
    # Meter: 0.8337029252642651
# Pred TS:
    # Meter: 0.6744778008379959
    # TS: {'both': 0.23700788477568702, 'num': 0.36074556908402683, 'denom': 0.7589199087169817} 73179.0
# Always 4/4:
    # Meter: 0.7312139550727431
    # TS: {'both': 0.3110591836455814, 'num': 0.4347968679539212, 'denom': 0.7589199087169817} 73179.0

# GT my repro:
    # Meter: 0.6832023859024048

